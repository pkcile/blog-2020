---
title: PostgreSQL的使用之创建组合索引btree和空间索引gist对组合查询效率的影响
date: 2025-02-17 22:39:19
tags: 
- 数据库
toc: true
description: 
categories: 
- 数据库 
---
[toc]

> 当单个数据表的数据量增大到百万级别甚至达到千万级别，如何对实际应用中涉及到多个字段和不同时间范围的数据表进行高效的查询呢？那么我们不妨看看数据表的索引对数据查询有什么影响；在实际使用多个字段进行组合查询时，如果查询条件涉及到多个字段如时间、字符串、PostGIS矢量等类型，大致创建两个索引，一个是满足通用字段的组合btree索引、另一个是适合空间查询的gist索引；首先，本文将使用python脚本创建对应的表和模拟大概600万条数据，时间字段随机使用从2022-2032天中的一天；然后，我们看下实际不额外创建任何索引的情况下查询区段时间范围内的查询时间；最后在创建索引后对使用组合索引和单个索引进行查询时间的对比，得出PostgreSQL中创建索引对组合查询效率的影响。



